entities:
  seaf.ta.reverse.general:
    presentations:
      readme:
        type: markdown
        template: ../../README.md

      readme_cloud_advanced:
        type: markdown
        template: ../../cloud.ru/advanced/README.md

      metamodel:
        type: mermaid
        template: templates/schema.mmd

      loc:
        type: markdown
        template: templates/list_of_contents.md
        source: >
          (
              $id := $params.id;
              $txt := $params.txt;
              $matcher := $eval("/^seaf\\.ta\\." & $id & ".*$/");
              $functions := $.entities.$spread()[$matcher($keys()[0])].*.menu;
              $menu := $functions.(
                  $item := $;
                  $matcher := $eval("/.*(" & $txt & ".*)$/");
                  $items := $eval($item)[location ~> $matcher];
                  $items.({
                    'location': $matcher($.location).groups[0],
                    'link': $.link
                  })
              );
              {
                  'txt': $txt,
                  'menu': $menu
              }
          
          )